<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>TM â€“ iPhone PWA (Forced Reload + CacheBuster)</title>
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#ffffff"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="assets/icon-180.png">
</head>
<body>
<header>
<h1>Teachable Machine â€“ iPhone PWA</h1>
</header>
<main>
<button id="btn-start">ðŸ“· Kamera starten</button>
<canvas id="canvas" width="640" height="480"></canvas>
<div id="results"></div>
<div id="status"></div>
<div id="diag"></div>
<input type="file" id="file" accept="image/*" capture="environment" style="display:none">
<button id="btn-file">Bild auswÃ¤hlen</button>
</main>

<script>
let libsLoaded=false;
async function ensureLibs(){
 if(libsLoaded)return;
 await Promise.all([
  new Promise((res,rej)=>{const s=document.createElement('script');s.src='https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.20.0/dist/tf.min.js';s.onload=res;s.onerror=rej;document.head.appendChild(s);}),
  new Promise((res,rej)=>{const s=document.createElement('script');s.src='https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js';s.onload=res;s.onerror=rej;document.head.appendChild(s);})
 ]);
 libsLoaded=true;
}
</script>
<script src="app.js"></script>
<script>
if('serviceWorker' in navigator){
  window.addEventListener('load',()=>{
    navigator.serviceWorker.register('/tm-pwa/sw.js',{scope:'/tm-pwa/'}).catch(console.error);
  });
}
</script>
</body>
</html>
